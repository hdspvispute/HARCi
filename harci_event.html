<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>HITACHI ‚Ä¢ HARCi</title>
  <style>
    :root{
      --bg:#08101d; --card:#0e1a2b; --text:#eaf2ff; --muted:#a6b7d1;
      --ring:#2e6bff; --accent:#e60012; --border:rgba(255,255,255,.08);
      --header-h:68px; --hpad:24px;
    }
    *{ box-sizing:border-box; }
    html,body{ height:100%; margin:0; }
    body{
      background:radial-gradient(1200px 600px at 15% 15%, #0f1f39 0%, #08101d 45%, #070d17 100%);
      color:var(--text); font-family: Inter, ui-sans-serif, system-ui, "Segoe UI", Roboto, Arial, sans-serif;
      overflow:hidden; /* no page scroll */
    }

    /* Header */
    .topbar{
      position:fixed; top:0; left:0; right:0; height:var(--header-h);
      display:flex; align-items:center; justify-content:flex-end;
      padding:0 28px; backdrop-filter:saturate(1.2) blur(10px);
      background:linear-gradient(180deg, rgba(6,12,22,.75), rgba(6,12,22,.35));
      border-bottom:1px solid var(--border); z-index:20;
    }
    .hitachi{ font-weight:900; letter-spacing:.12em; }

    /* Layout grid */
    .wrap{
      position:fixed; top:var(--header-h); left:0; right:0; bottom:0;
      padding: 18px var(--hpad);
      display:grid; grid-template-columns: 1fr 1.1fr; gap:28px;
      align-items:center;
    }
    .card{
      height:100%;
      background:linear-gradient(180deg, rgba(18,34,59,.85), rgba(10,20,37,.85));
      border:1px solid var(--border); border-radius:22px;
      box-shadow:0 30px 60px rgba(0,0,0,.35);
      overflow:hidden;
    }

    /* LEFT: Avatar card (bigger avatar, no live bubble) */
    .avatarCard{ position:relative; display:flex; flex-direction:column; gap:12px; padding:20px; min-height:0; }
    .avatarWrap{
      position:relative; width:min(42vh, 460px); height:min(42vh, 460px);
      border-radius:999px; display:grid; place-items:center; margin:0 auto;
      background:radial-gradient(60% 60% at 50% 40%, #0d1f3a, #0a1627 60%, #0a1422 100%);
      box-shadow:0 0 0 2px rgba(255,255,255,.04) inset, 0 0 100px rgba(46,107,255,.28);
      overflow:hidden;
    }
    .ring{ position:absolute; inset:18px; border-radius:999px;
      background:conic-gradient(from 200deg, rgba(46,107,255,.6), rgba(120,70,255,.35), rgba(46,107,255,.6));
      filter:blur(20px); opacity:.45; }
    #remoteVideo{ position:relative; z-index:2; width:94%; height:94%; display:grid; place-items:center; border-radius:999px; overflow:hidden; }
    #remoteVideo video, #remoteVideo audio{ width:100%; height:100%; object-fit:cover; display:block; }

    /* Mic/speaking status badge */
    #micBadge{
      position:absolute; top:10px; right:12px; z-index:5; display:none;
      padding:6px 10px; border-radius:999px; font-size:12px;
      background:rgba(255,255,255,.08); border:1px solid var(--border); color:var(--text);
      pointer-events:none;
    }
    #micBadge.on{ display:inline-block; }

    /* Controls */
    .controls { display:flex; gap:12px; justify-content:center; align-items:center; margin-top:2px; }
    .btnRound{ position:relative; z-index:1; width:56px; height:56px; border-radius:999px; display:grid; place-items:center; cursor:pointer;
      border:1px solid var(--border); background:rgba(255,255,255,.04); box-shadow:0 6px 20px rgba(0,0,0,.25); font-size:22px; color:var(--text);}
    .btnRound.primary{ background:radial-gradient(80% 80% at 50% 35%, #ff5a73 0%, #b01125 100%); border-color:transparent }
    .btnRound:disabled{ opacity:.55; cursor:not-allowed }

    /* Status chips */
    .stats{ display:flex; gap:8px; justify-content:center; color:var(--muted); font-size:12px; flex-wrap:wrap; }
    .kv{ padding:5px 8px; border:1px solid var(--border); border-radius:10px; background:rgba(255,255,255,.03); opacity:.9; }

    /* Transcript area (only scrollable region) */
    .transcriptWrap{ display:flex; flex-direction:column; gap:8px; flex:1; min-height:0; border-top:1px dashed var(--border); padding-top:8px; }
    #transcript {
      flex: 1;
      min-height: 0;
      overflow: hidden; /* hide scrollbar by default */
      padding: 8px;
      border: 1px solid var(--border);
      border-radius: 12px;
      background: rgba(7,14,25,.6);
      font-size: 13px;
      line-height: 1.3;
      scrollbar-width: thin; /* Firefox */
    }
    #transcript:hover { overflow-y: auto; }
    .row{ display:flex; gap:8px; margin:8px 0; }
    .row .who{ width:58px; color:var(--muted); font-size:12px; text-align:right; padding-top:4px; }
    .row .bubble{ max-width:100%; background:#13223a; border:1px solid #1e2b36; border-radius:12px; padding:10px 12px; }

    .composer{ display:flex; gap:8px; }
    .composer textarea{
      flex:1; height:46px; border-radius:12px; border:1px solid var(--border);
      background:rgba(7,14,25,.6); color:var(--text); padding:10px; resize:vertical; max-height:84px;
    }
    .chip{ background:transparent; border:1px solid var(--border); color:var(--muted); border-radius:10px; padding:8px 12px; cursor:pointer; }

    /* RIGHT: Event poster */
    .poster{
      position:relative; height:100%; padding:26px 28px;
      display:flex; flex-direction:column; justify-content:flex-end;
      background:
        radial-gradient(800px 320px at 20% -10%, rgba(46,107,255,.35), transparent 60%),
        radial-gradient(1200px 480px at 110% 60%, rgba(186,46,255,.35), transparent 60%),
        linear-gradient(145deg, #071223 0%, #0a1629 45%, #0c1530 100%);
    }
    .poster .brand{ position:absolute; top:18px; right:20px; font-weight:900; letter-spacing:.12em; }
    .poster h1{ margin:0 0 4px 0; letter-spacing:.2px; font-size: clamp(22px, 3.4vh, 36px); line-height:1.08; }
    .poster h2{ margin:2px 0; font-size: clamp(14px, 2.2vh, 20px); color:#7fbcff; letter-spacing:.02em; }
    .poster p{ margin:0; opacity:.9; font-size: clamp(12px, 1.8vh, 16px); }

    @media (max-width: 980px){
      .wrap{ grid-template-columns: 1fr; }
      .avatarWrap{ width:min(40vh, 420px); height:min(40vh, 420px); }
    }
    @media (max-height: 760px){
      .avatarWrap { width:min(36vh, 380px); height:min(36vh, 380px); }
      .poster h1 { font-size: clamp(20px, 3vh, 32px); }
    }
  </style>
</head>
<body>
  <div class="topbar"><div class="hitachi">HITACHI</div></div>

  <main class="wrap">
    <!-- LEFT: Avatar card -->
    <section class="card avatarCard" aria-label="HARCi Avatar">
      <div class="avatarWrap">
        <div class="ring"></div>
        <div id="remoteVideo" aria-label="HARCi Video"></div>
      </div>

      <!-- Mic/speaking status badge -->
      <div id="micBadge" aria-live="polite"></div>

      <div class="controls" role="group" aria-label="Controls">
        <button id="btnStart" class="btnRound" title="Start">‚ñ∂</button>
        <button id="btnMic"   class="btnRound" title="Speak" disabled>üéô</button>
        <button id="btnStop"  class="btnRound primary" title="Stop" disabled>‚è∫</button>
      </div>

      <div class="stats">
        <div class="kv">Status: <span id="statStatus">idle</span></div>
        <div class="kv">ICE: <span id="statIce">-</span></div>
        <div class="kv">PC:  <span id="statPc">-</span></div>
      </div>

      <!-- Only scrollable area -->
      <div class="transcriptWrap">
        <div id="transcript" aria-live="polite"></div>
        <div class="composer">
          <textarea id="spokenText" aria-label="Your question" placeholder="Type to ask HARCi‚Ä¶"></textarea>
          <button id="btnSend" class="chip">Send</button>
        </div>
      </div>
    </section>

    <!-- RIGHT: Event poster -->
    <section class="card poster" aria-label="Event">
      <div class="brand">HITACHI</div>
      <h1>HARC AI Launch</h1>
      <h2>HARCi</h2>
      <p>Official Launch Event</p>
    </section>
  </main>

  <!-- Config (single block) -->
  <script>
  window.HARCI_CONFIG = {
    region: "eastus",                      // your Speech region
    voice: "en-US-AvaMultilingualNeural",
    character: "lisa",
    style: "casual-sitting",

    // üëá same-origin: app serves both UI + API
    backendBase: window.location.origin,

    relayPath: "/relay-token",
    speechTokenPath: "/speech-token",
    askPath: "/ask",

    speakingStyle: "chat",
    styleDegree:  "1.25",
    speakingRate: "+6%",
    speakingPitch:"+2st"
  };
</script>

  <!-- SDK -->
  <script src="https://aka.ms/csspeech/jsbrowserpackageraw"></script>
  <script src="/static/harci.js?v=25"></script>

</body>
</html>
