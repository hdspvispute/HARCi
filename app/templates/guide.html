{% extends "_base.html" %}
{% block title %}Guide Â· HARCi{% endblock %}

{% block content %}
<div class="grid grid-cols-1 gap-6 lg:grid-cols-2">
  <!-- Left: Avatar + controls -->
  <section class="space-y-4">
    <div class="relative rounded-2xl overflow-hidden border border-white/10 bg-black">
      <video id="remoteVideo" class="w-full aspect-video bg-black" playsinline autoplay muted></video>
      <audio id="remoteAudio" playsinline></audio>

      <!-- Status chip -->
      <div class="absolute left-3 top-3 flex items-center gap-2">
        <span class="inline-flex items-center rounded-full bg-neutral-900/70 px-3 py-1 text-xs border border-white/10">
          <span class="h-2 w-2 rounded-full bg-[var(--brand-red)] mr-2"></span>
          <span id="statusText">Tap start</span>
        </span>
      </div>
    </div>

    <div class="flex items-center gap-3">
      <button id="btnStartSession" class="btn btn-brand">
        Start session
      </button>

      <button id="btnHoldMic" class="btn btn-outline">
        Hold to talk
      </button>

      <button id="btnEnd" class="ml-auto btn btn-plain">
        End
      </button>
    </div>

    <!-- Live captions -->
    <div class="rounded-xl border border-white/10 bg-neutral-800/50 p-3 text-sm min-h-10">
      <span id="caption" class="text-neutral-300"></span>
    </div>

    <!-- Quick chips -->
    <div id="quickChips" class="flex flex-wrap gap-2">
      <button class="chip" data-prompt="Agenda">Agenda</button>
      <button class="chip" data-prompt="Venue Map">Venue Map</button>
      <button class="chip" data-prompt="Speakers">Speakers</button>
      <button class="chip" data-prompt="Help">Help</button>
    </div>
  </section>

  <!-- Right: Briefing + Image -->
  <section class="space-y-4">
    <div class="rounded-2xl border border-white/10 bg-neutral-800/50 p-5 min-h-48">
      <div id="briefing" class="prose prose-invert max-w-none"></div>
    </div>

    <div id="imagePanel" class="hidden rounded-2xl border border-white/10 bg-neutral-800/50 overflow-hidden">
      <img id="briefImage" alt="" class="w-full object-cover">
      <div class="p-3 text-xs text-neutral-300"><span id="imgAlt"></span></div>
    </div>
  </section>
</div>
{% endblock %}

{% block extra_scripts %}
  <!-- Load Speech SDK only on the guide screen -->
  <script src="https://aka.ms/csspeech/jsbrowserpackageraw"></script>
{% endblock %}
